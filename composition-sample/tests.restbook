[{"kind":1,"language":"markdown","value":"# Verified Web Hooks Sample\n\nYou can register the web hook consumer using this `POST` request\n\n> Currently, outbound requests are only allowed for `http://localhost:3001`. See [`spin.toml](./api/spin.toml).","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/register\nContent-Type: application/json\n\n{\n    \"url\": \"http://localhost:3001/target\",\n    \"event\": \"customer_created\"\n}","outputs":[{"mime":"x-application/rest-book","value":{"status":201,"statusText":"Created","headers":{"Date":"Wed, 06 Mar 2024 07:19:00 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/0.21.4","Content-Length":65}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:3000/register","timeout":10000,"headers":{"Content-Type":"application/json"},"data":{"url":"http://localhost:3001/target","event":"customer_created"}},"data":{"url":"http://localhost:3001/target","event":"customer_created","signingKey":"GCnaHHJrFNbq9RcTDki89ZuUX9HOOVCTVYKI"}}},{"mime":"text/x-json","value":{"status":201,"statusText":"Created","headers":{"Date":"Wed, 06 Mar 2024 07:19:00 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/0.21.4","Content-Length":65}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:3000/register","timeout":10000,"headers":{"Content-Type":"application/json"},"data":{"url":"http://localhost:3001/target","event":"customer_created"}},"data":{"url":"http://localhost:3001/target","event":"customer_created","signingKey":"GCnaHHJrFNbq9RcTDki89ZuUX9HOOVCTVYKI"}}},{"mime":"text/html","value":"[object Object]"}]},{"kind":1,"language":"markdown","value":"## Delete all registrations\n\nWhen you want to re-register a web hook consumer using the same URL (used as primary key in database), you've to delete the registrations first!","outputs":[]},{"kind":2,"language":"rest-book","value":"DELETE http://localhost:3000/registrations","outputs":[{"mime":"x-application/rest-book","value":{"status":200,"statusText":"OK","headers":{"Date":"Wed, 06 Mar 2024 07:18:59 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","User-Agent":"axios/0.21.4"}},"request":{"method":"DELETE","httpVersion":"1.1","responseUrl":"http://localhost:3000/registrations","timeout":10000,"headers":{}},"data":""}},{"mime":"text/x-json","value":{"status":200,"statusText":"OK","headers":{"Date":"Wed, 06 Mar 2024 07:18:59 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","User-Agent":"axios/0.21.4"}},"request":{"method":"DELETE","httpVersion":"1.1","responseUrl":"http://localhost:3000/registrations","timeout":10000,"headers":{}},"data":""}},{"mime":"text/html","value":""}]},{"kind":1,"language":"markdown","value":"## Retrieve a list of all registrations\n\nYou can retrieve a list of all web hook consumers using this `GET` request","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/registrations","outputs":[{"mime":"x-application/rest-book","value":{"status":200,"statusText":"OK","headers":{"Date":"Wed, 06 Mar 2024 07:11:51 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","User-Agent":"axios/0.21.4"}},"request":{"method":"GET","httpVersion":"1.1","responseUrl":"http://localhost:3000/registrations","timeout":10000,"headers":{}},"data":[{"url":"http://localhost:3001/target","event":"customer_created","signingKey":"xwxz8gTqHvf8125lzwhWmI45v4za3C1G9z0L"}]}},{"mime":"text/x-json","value":{"status":200,"statusText":"OK","headers":{"Date":"Wed, 06 Mar 2024 07:11:51 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","User-Agent":"axios/0.21.4"}},"request":{"method":"GET","httpVersion":"1.1","responseUrl":"http://localhost:3000/registrations","timeout":10000,"headers":{}},"data":[{"url":"http://localhost:3001/target","event":"customer_created","signingKey":"xwxz8gTqHvf8125lzwhWmI45v4za3C1G9z0L"}]}},{"mime":"text/html","value":"[object Object]"}]},{"kind":1,"language":"markdown","value":"## Fire the web hook\n\nYou can fire the web hook (invokes all consumers) using this `POST` request","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/fire","outputs":[{"mime":"x-application/rest-book","value":{"status":200,"statusText":"OK","headers":{"Date":"Wed, 06 Mar 2024 07:19:03 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded","User-Agent":"axios/0.21.4"}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:3000/fire","timeout":10000,"headers":{}},"data":""}},{"mime":"text/x-json","value":{"status":200,"statusText":"OK","headers":{"Date":"Wed, 06 Mar 2024 07:19:03 GMT","Transfer-Encoding":"chunked"},"config":{"timeout":10000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded","User-Agent":"axios/0.21.4"}},"request":{"method":"POST","httpVersion":"1.1","responseUrl":"http://localhost:3000/fire","timeout":10000,"headers":{}},"data":""}},{"mime":"text/html","value":""}]}]